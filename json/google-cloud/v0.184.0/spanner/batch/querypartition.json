{"id":"spanner\/batch\/querypartition","type":"","title":"Google\\Cloud\\Spanner\\Batch\\QueryPartition","name":"QueryPartition","description":"<p>Represents a Query Partition.<\/p>\n<p>Partitions can be shared with other servers or processes by casting the\nobject to a string, or by calling <a data-custom-type=\"spanner\/batch\/querypartition\" data-method=\"serialize\">Google\\Cloud\\Spanner\\Batch\\QueryPartition::serialize()<\/a>.<\/p>\n<p>Note that when reading or querying against a partition, the request MUST be\nmade using the same Batch Snapshot with which the partition was initialized.\nIn practice, this means that a shared partition must be accompanied by its\ncorresponding snapshot. For more information, refer to usage notes on\n<a data-custom-type=\"spanner\/batch\/batchclient\">Google\\Cloud\\Spanner\\Batch\\BatchClient<\/a>.<\/p>","examples":[{"caption":"","code":"use Google\\Cloud\\Spanner\\SpannerClient;\n\n$spanner = new SpannerClient();\n$batch = $spanner->batch('instance-id', 'database-id');\n$snapshot = $batch->snapshot();\n\n$partitions = $snapshot->partitionQuery(\n    'SELECT * FROM Users WHERE firstName = @firstName AND location = @location',\n    [\n        'parameters' => [\n            'firstName' => 'John',\n            'location' => 'USA'\n        ]\n    ]\n);"},{"caption":"<p>Serialize a partition to share it with another worker.<\/p>","code":"$partitionString = (string) $partition;"},{"caption":"<p>Calling QueryPartition::serialize() has the same effect.<\/p>","code":"$partitionString = $partition->serialize();"}],"resources":[],"methods":[{"id":"__construct","type":"constructor","name":"__construct","source":"Spanner\/src\/Batch\/QueryPartition.php#L105","description":"","examples":[],"resources":[],"params":[{"name":"token","description":"<p>The token identifying the partition.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":false,"nullable":null},{"name":"sql","description":"<p>The query string to execute.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration Options<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":false,"nullable":null},{"name":"options.maxPartitions","description":"<p>The desired maximum number of partitions to return. For example, this may be set to the number of workers available. The maximum value is currently 200,000. This is only a hint. The actual number of partitions returned may be smaller than this maximum count request. <strong>Defaults to<\/strong> <code>10000<\/code>.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.integer.php\" target=\"_blank\">int<\/a>"],"optional":null,"nullable":null},{"name":"options.partitionSizeBytes","description":"<p>The desired data size for each partition generated. This is only a hint. The actual size of each partition may be smaller or larger than this size request. <strong>Defaults to<\/strong> <code>1000000000<\/code> (i.e. 1 GiB).<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.integer.php\" target=\"_blank\">int<\/a>"],"optional":null,"nullable":null},{"name":"options.parameters","description":"<p>A key\/value array of Query Parameters, where the key is represented in the query string prefixed by a <code>@<\/code> symbol.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":null,"nullable":null},{"name":"options.types","description":"<p>A key\/value array of Query Parameter types. Generally, Google Cloud PHP can infer types. Explicit type definitions are only necessary for null parameter values. Accepted values are defined as constants on <a data-custom-type=\"spanner\/valuemapper\">Google\\Cloud\\Spanner\\ValueMapper<\/a>, and are as follows: <code>Database::TYPE_BOOL<\/code>, <code>Database::TYPE_INT64<\/code>, <code>Database::TYPE_FLOAT64<\/code>, <code>Database::TYPE_TIMESTAMP<\/code>, <code>Database::TYPE_DATE<\/code>, <code>Database::TYPE_STRING<\/code>, <code>Database::TYPE_BYTES<\/code>, <code>Database::TYPE_ARRAY<\/code> and <code>Database::TYPE_STRUCT<\/code>. If the parameter type is an array, the type should be given as an array, where the first element is <code>Database::TYPE_ARRAY<\/code> and the second element is the array type, for instance <code>[Database::TYPE_ARRAY, Database::TYPE_INT64]<\/code>.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":null,"nullable":null}],"exceptions":[],"returns":[]},{"id":"sql","type":"instance","name":"sql","source":"Spanner\/src\/Batch\/QueryPartition.php#L122","description":"<p>Returns the SQL query string.<\/p>","examples":[{"caption":"","code":"$sql = $partition->sql();"}],"resources":[],"params":[],"exceptions":[],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"description":""}]},{"id":"serialize","type":"instance","name":"serialize","source":"Spanner\/src\/Batch\/QueryPartition.php#L137","description":"<p>Return a stringified representation of the QueryPartition object.<\/p>","examples":[{"caption":"","code":"$partitionString = $partition->serialize();"}],"resources":[],"params":[],"exceptions":[],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"description":""}]},{"id":"token","type":"instance","name":"token","source":"Spanner\/src\/Batch\/PartitionTrait.php#L45","description":"<p>Returns the partition token.<\/p>\n\nImplemented in <a data-custom-type=\"spanner\/batch\/partitiontrait\">Google\\Cloud\\Spanner\\Batch\\PartitionTrait<\/a>","examples":[{"caption":"","code":"$token = $partition->token();"}],"resources":[],"params":[],"exceptions":[],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"description":""}]},{"id":"options","type":"instance","name":"options","source":"Spanner\/src\/Batch\/PartitionTrait.php#L60","description":"<p>Returns the partition options.<\/p>\n\nImplemented in <a data-custom-type=\"spanner\/batch\/partitiontrait\">Google\\Cloud\\Spanner\\Batch\\PartitionTrait<\/a>","examples":[{"caption":"","code":"$options = $partition->options();"}],"resources":[],"params":[],"exceptions":[],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"description":""}]}]}