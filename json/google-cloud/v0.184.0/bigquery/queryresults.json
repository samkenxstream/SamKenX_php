{"id":"bigquery\/queryresults","type":"","title":"Google\\Cloud\\BigQuery\\QueryResults","name":"QueryResults","description":"<p>QueryResults represent the result of a BigQuery SQL query. Read more at the\n<a href=\"https:\/\/cloud.google.com\/bigquery\/docs\/reference\/rest\/v2\/jobs\/query#response-body\">Query Response API Documentation<\/a><\/p>\n<p>This class should be not instantiated directly, but as a result of\ncalling <a data-custom-type=\"bigquery\/bigqueryclient\" data-method=\"runQuery\">Google\\Cloud\\BigQuery\\BigQueryClient::runQuery()<\/a> or\n<a data-custom-type=\"bigquery\/job\" data-method=\"queryResults\">Google\\Cloud\\BigQuery\\Job::queryResults()<\/a>.<\/p>","examples":[],"resources":[],"methods":[{"id":"__construct","type":"constructor","name":"__construct","source":"BigQuery\/src\/QueryResults.php#L80","description":"","examples":[],"resources":[],"params":[{"name":"connection","description":"<p>Represents a connection to\nBigQuery.<\/p>","types":["<a data-custom-type=\"bigquery\/connection\/connectioninterface\">Google\\Cloud\\BigQuery\\Connection\\ConnectionInterface<\/a>"],"optional":false,"nullable":null},{"name":"jobId","description":"<p>The job's ID.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":false,"nullable":null},{"name":"projectId","description":"<p>The project's ID.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":false,"nullable":null},{"name":"info","description":"<p>The query result's metadata.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":false,"nullable":null},{"name":"mapper","description":"<p>Maps values between PHP and BigQuery.<\/p>","types":["<a data-custom-type=\"bigquery\/valuemapper\">Google\\Cloud\\BigQuery\\ValueMapper<\/a>"],"optional":false,"nullable":null},{"name":"job","description":"<p>The job from which the query results originated.<\/p>","types":["<a data-custom-type=\"bigquery\/job\">Google\\Cloud\\BigQuery\\Job<\/a>"],"optional":false,"nullable":null},{"name":"queryResultsOptions","description":"<p>Default options to be used for calls to\nget query results.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":false,"nullable":null}],"exceptions":[],"returns":[]},{"id":"rows","type":"instance","name":"rows","source":"BigQuery\/src\/QueryResults.php#L158","description":"<p>Retrieves the rows associated with the query and merges them together\nwith the table's schema.<\/p>\n<p>Refer to the table below for a guide on how BigQuery types are mapped as\nthey come back from the API.<\/p>\n<table>\n<thead>\n<tr>\n<th><strong>PHP Type<\/strong><\/th>\n<th><strong>BigQuery Data Type<\/strong><\/th>\n<\/tr>\n<\/thead>\n<tbody>\n<tr>\n<td><code>\\DateTimeInterface<\/code><\/td>\n<td><code>DATETIME<\/code><\/td>\n<\/tr>\n<tr>\n<td><a data-custom-type=\"bigquery\/bytes\">Google\\Cloud\\BigQuery\\Bytes<\/a><\/td>\n<td><code>BYTES<\/code><\/td>\n<\/tr>\n<tr>\n<td><a data-custom-type=\"bigquery\/date\">Google\\Cloud\\BigQuery\\Date<\/a><\/td>\n<td><code>DATE<\/code><\/td>\n<\/tr>\n<tr>\n<td><a data-custom-type=\"core\/int64\">Google\\Cloud\\Core\\Int64<\/a><\/td>\n<td><code>INTEGER<\/code><\/td>\n<\/tr>\n<tr>\n<td><a data-custom-type=\"bigquery\/time\">Google\\Cloud\\BigQuery\\Time<\/a><\/td>\n<td><code>TIME<\/code><\/td>\n<\/tr>\n<tr>\n<td><a data-custom-type=\"bigquery\/timestamp\">Google\\Cloud\\BigQuery\\Timestamp<\/a><\/td>\n<td><code>TIMESTAMP<\/code><\/td>\n<\/tr>\n<tr>\n<td>Associative Array<\/td>\n<td><code>RECORD<\/code><\/td>\n<\/tr>\n<tr>\n<td>Non-Associative Array<\/td>\n<td><code>RECORD<\/code> (Repeated)<\/td>\n<\/tr>\n<tr>\n<td><code>float<\/code><\/td>\n<td><code>FLOAT<\/code><\/td>\n<\/tr>\n<tr>\n<td><code>int<\/code><\/td>\n<td><code>INTEGER<\/code><\/td>\n<\/tr>\n<tr>\n<td><code>string<\/code><\/td>\n<td><code>STRING<\/code><\/td>\n<\/tr>\n<tr>\n<td><code>bool<\/code><\/td>\n<td><code>BOOLEAN<\/code><\/td>\n<\/tr>\n<\/tbody>\n<\/table>","examples":[{"caption":"","code":"$rows = $queryResults->rows();\n\nforeach ($rows as $row) {\n    echo $row['name'] . PHP_EOL;\n}"}],"resources":[],"params":[{"name":"options","description":"<p>Configuration options. Please note, these options will inherit the\nvalues set by either\n<a data-custom-type=\"bigquery\/bigqueryclient\" data-method=\"runQuery\">Google\\Cloud\\BigQuery\\BigQueryClient::runQuery()<\/a> or\n<a data-custom-type=\"bigquery\/job\" data-method=\"queryResults\">Google\\Cloud\\BigQuery\\Job::queryResults()<\/a>.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null},{"name":"options.maxResults","description":"<p>Maximum number of results to read per page.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.integer.php\" target=\"_blank\">int<\/a>"],"optional":null,"nullable":null},{"name":"options.startIndex","description":"<p>Zero-based index of the starting row.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.integer.php\" target=\"_blank\">int<\/a>"],"optional":null,"nullable":null},{"name":"options.timeoutMs","description":"<p>How long, in milliseconds, each API call will wait for query results to become available before timing out. Depending on whether the $maxRetries has been exceeded, the results will be polled again after the timeout has been reached. <strong>Defaults to<\/strong> <code>10000<\/code> milliseconds (10 seconds).<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.integer.php\" target=\"_blank\">int<\/a>"],"optional":null,"nullable":null},{"name":"options.maxRetries","description":"<p>The number of times to poll the Job status, until the job is complete. By default, will poll indefinitely.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.integer.php\" target=\"_blank\">int<\/a>"],"optional":null,"nullable":null},{"name":"options.returnRawResults","description":"<p>Returns the raw data types returned from BigQuery without converting their values into native PHP types or the custom type classes supported by this library.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.boolean.php\" target=\"_blank\">bool<\/a>"],"optional":null,"nullable":null}],"exceptions":[{"type":"\\Google\\Cloud\\BigQuery\\JobException","description":"If the maximum number of retries while waiting for\nquery completion has been exceeded."},{"type":"\\Google\\Cloud\\Core\\Exception\\GoogleException","description":"Thrown in the case of a malformed response."}],"returns":[{"types":["<a data-custom-type=\"core\/iterator\/itemiterator\">Google\\Cloud\\Core\\Iterator\\ItemIterator<\/a>"],"description":""}]},{"id":"waitUntilComplete","type":"instance","name":"waitUntilComplete","source":"BigQuery\/src\/QueryResults.php#L225","description":"<p>Blocks until the query is complete.<\/p>","examples":[{"caption":"","code":"$queryResults->waitUntilComplete();"}],"resources":[],"params":[{"name":"options","description":"<p>Configuration options. Please note, these options will inherit the\nvalues set by either\n<a data-custom-type=\"bigquery\/bigqueryclient\" data-method=\"runQuery\">Google\\Cloud\\BigQuery\\BigQueryClient::runQuery()<\/a> or\n<a data-custom-type=\"bigquery\/job\" data-method=\"queryResults\">Google\\Cloud\\BigQuery\\Job::queryResults()<\/a>.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null},{"name":"options.maxResults","description":"<p>Maximum number of results to read per page.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.integer.php\" target=\"_blank\">int<\/a>"],"optional":null,"nullable":null},{"name":"options.startIndex","description":"<p>Zero-based index of the starting row.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.integer.php\" target=\"_blank\">int<\/a>"],"optional":null,"nullable":null},{"name":"options.timeoutMs","description":"<p>How long, in milliseconds, each API call will wait for query results to become available before timing out. Depending on whether the $maxRetries has been exceeded, the results will be polled again after the timeout has been reached. <strong>Defaults to<\/strong> <code>10000<\/code> milliseconds (10 seconds).<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.integer.php\" target=\"_blank\">int<\/a>"],"optional":null,"nullable":null},{"name":"options.maxRetries","description":"<p>The number of times to poll the Job status, until the job is complete. By default, will poll indefinitely.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.integer.php\" target=\"_blank\">int<\/a>"],"optional":null,"nullable":null}],"exceptions":[{"type":"\\Google\\Cloud\\BigQuery\\JobException","description":"If the maximum number of retries while waiting for\nquery completion has been exceeded."}],"returns":[]},{"id":"info","type":"instance","name":"info","source":"BigQuery\/src\/QueryResults.php#L255","description":"<p>Retrieves the cached query details.<\/p>","examples":[{"caption":"","code":"$info = $queryResults->info();\necho $info['totalBytesProcessed'];"}],"resources":[{"title":"Jobs getQueryResults API response documentation.","link":"https:\/\/cloud.google.com\/bigquery\/docs\/reference\/rest\/v2\/jobs\/getQueryResults#response-body"}],"params":[],"exceptions":[],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"description":""}]},{"id":"reload","type":"instance","name":"reload","source":"BigQuery\/src\/QueryResults.php#L281","description":"<p>Triggers a network request to reload the query's details.<\/p>","examples":[{"caption":"","code":"$queryResults->reload();"}],"resources":[{"title":"Jobs getQueryResults API documentation.","link":"https:\/\/cloud.google.com\/bigquery\/docs\/reference\/rest\/v2\/jobs\/getQueryResults"}],"params":[{"name":"options","description":"<p>Configuration options.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null},{"name":"options.maxResults","description":"<p>Maximum number of results to read per page.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.integer.php\" target=\"_blank\">int<\/a>"],"optional":null,"nullable":null},{"name":"options.startIndex","description":"<p>Zero-based index of the starting row.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.integer.php\" target=\"_blank\">int<\/a>"],"optional":null,"nullable":null},{"name":"options.timeoutMs","description":"<p>How long to wait for the query to complete, in milliseconds. <strong>Defaults to<\/strong> <code>10000<\/code> milliseconds (10 seconds).<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.integer.php\" target=\"_blank\">int<\/a>"],"optional":null,"nullable":null}],"exceptions":[],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"description":""}]},{"id":"identity","type":"instance","name":"identity","source":"BigQuery\/src\/QueryResults.php#L300","description":"<p>Retrieves the query result's identity.<\/p>\n<p>An identity provides a description of a nested resource.<\/p>","examples":[{"caption":"","code":"echo $queryResults->identity()['projectId'];"}],"resources":[],"params":[],"exceptions":[],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"description":""}]},{"id":"isComplete","type":"instance","name":"isComplete","source":"BigQuery\/src\/QueryResults.php#L325","description":"<p>Checks the job's completeness. Useful in combination with\n<a data-custom-type=\"bigquery\/queryresults\" data-method=\"reload\">Google\\Cloud\\BigQuery\\QueryResults::reload()<\/a> to poll for query\nstatus.<\/p>","examples":[{"caption":"","code":"$isComplete = $queryResults->isComplete();\n\nwhile (!$isComplete) {\n    sleep(1); \/\/ let's wait for a moment...\n    $queryResults->reload();\n    $isComplete = $queryResults->isComplete();\n}\n\necho 'Query complete!';"}],"resources":[],"params":[],"exceptions":[],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.boolean.php\" target=\"_blank\">bool<\/a>"],"description":""}]},{"id":"job","type":"instance","name":"job","source":"BigQuery\/src\/QueryResults.php#L343","description":"<p>Returns a reference to the <a data-custom-type=\"bigquery\/job\">Google\\Cloud\\BigQuery\\Job<\/a> instance used\nto fetch the query results. This is especially useful when attempting to\naccess job statistics after calling\n<a data-custom-type=\"bigquery\/bigqueryclient\" data-method=\"runQuery\">Google\\Cloud\\BigQuery\\BigQueryClient::runQuery()<\/a>.<\/p>","examples":[{"caption":"","code":"$job = $queryResults->job();"}],"resources":[],"params":[],"exceptions":[],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"description":""}]}]}