{"id":"datastore\/operation","type":"","title":"Google\\Cloud\\Datastore\\Operation","name":"Operation","description":"<p>Run lookups and queries and commit changes.<\/p>\n<p>This class is used by <a data-custom-type=\"datastore\/datastoreclient\">Google\\Cloud\\Datastore\\DatastoreClient<\/a>\nand <a data-custom-type=\"datastore\/transaction\">Google\\Cloud\\Datastore\\Transaction<\/a> and is not intended to be used\ndirectly.<\/p>\n<p>Examples are omitted for brevity. Detailed usage examples can be found in\n<a data-custom-type=\"datastore\/datastoreclient\">Google\\Cloud\\Datastore\\DatastoreClient<\/a> and\n<a data-custom-type=\"datastore\/transaction\">Google\\Cloud\\Datastore\\Transaction<\/a>.<\/p>","examples":[],"resources":[],"methods":[{"id":"__construct","type":"constructor","name":"__construct","source":"Datastore\/src\/Operation.php#L70","description":"<p>Create an operation<\/p>","examples":[],"resources":[],"params":[{"name":"connection","description":"<p>A connection to Google Cloud Platform's Datastore API.<\/p>","types":["<a data-custom-type=\"datastore\/connection\/connectioninterface\">Google\\Cloud\\Datastore\\Connection\\ConnectionInterface<\/a>"],"optional":false,"nullable":null},{"name":"projectId","description":"<p>The Google Cloud Platform project ID.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":false,"nullable":null},{"name":"namespaceId","description":"<p>The namespace to use for all service requests.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":false,"nullable":null},{"name":"entityMapper","description":"<p>A Datastore Entity Mapper instance.<\/p>","types":["<a data-custom-type=\"datastore\/entitymapper\">Google\\Cloud\\Datastore\\EntityMapper<\/a>"],"optional":false,"nullable":null}],"exceptions":[],"returns":[]},{"id":"key","type":"instance","name":"key","source":"Datastore\/src\/Operation.php#L101","description":"<p>Create a single Key instance<\/p>","examples":[],"resources":[{"title":"Key","link":"https:\/\/cloud.google.com\/datastore\/reference\/rest\/v1\/Key"},{"title":"PathElement","link":"https:\/\/cloud.google.com\/datastore\/reference\/rest\/v1\/Key#PathElement"}],"params":[{"name":"kind","description":"<p>The kind.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":false,"nullable":null},{"name":"identifier","description":"<p>The ID or name.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>","<a href=\"http:\/\/php.net\/manual\/en\/language.types.integer.php\" target=\"_blank\">int<\/a>"],"optional":true,"nullable":null},{"name":"options","description":"<p>Configuration Options<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null},{"name":"options.identifierType","description":"<p>If omitted, type will be determined internally. In cases where any ambiguity can be expected (i.e. if you want to create keys with <code>name<\/code> but your values may pass PHP's <code>is_numeric()<\/code> check), this value may be explicitly set using <code>Key::TYPE_ID<\/code> or <code>Key::TYPE_NAME<\/code>.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":null,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"datastore\/key\">Google\\Cloud\\Datastore\\Key<\/a>"],"description":""}]},{"id":"keys","type":"instance","name":"keys","source":"Datastore\/src\/Operation.php#L139","description":"<p>Create multiple keys with the same configuration.<\/p>\n<p>When inserting multiple entities, creating a set of keys at once can be\nuseful. By defining the Key's kind and any ancestors up front, and\nallowing Cloud Datastore to allocate IDs, you can be sure that your\nentity identity and ancestry are correct and that there will be no\ncollisions during the insert operation.<\/p>","examples":[],"resources":[{"title":"Key","link":"https:\/\/cloud.google.com\/datastore\/reference\/rest\/v1\/Key"},{"title":"PathElement","link":"https:\/\/cloud.google.com\/datastore\/reference\/rest\/v1\/Key#PathElement"}],"params":[{"name":"kind","description":"<p>The kind to use in the final path element.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration Options<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null},{"name":"options.ancestors","description":"<p>An array of <a href=\"https:\/\/cloud.google.com\/datastore\/reference\/rest\/v1\/Key#PathElement\">PathElement<\/a> arrays. Use to create <a href=\"https:\/\/cloud.google.com\/datastore\/docs\/concepts\/entities#ancestor_paths\">ancestor paths<\/a>.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array[]<\/a>"],"optional":null,"nullable":null},{"name":"options.number","description":"<p>The number of keys to generate.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.integer.php\" target=\"_blank\">int<\/a>"],"optional":null,"nullable":null},{"name":"options.id","description":"<p>The ID for the last pathElement.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>","<a href=\"http:\/\/php.net\/manual\/en\/language.types.integer.php\" target=\"_blank\">int<\/a>"],"optional":null,"nullable":null},{"name":"options.name","description":"<p>The Name for the last pathElement.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":null,"nullable":null}],"exceptions":[{"type":"\\InvalidArgumentException","description":"If the number of keys is less than 1."}],"returns":[{"types":["<a data-custom-type=\"datastore\/key\">Google\\Cloud\\Datastore\\Key[]<\/a>"],"description":""}]},{"id":"entity","type":"instance","name":"entity","source":"Datastore\/src\/Operation.php#L215","description":"<p>Create an entity<\/p>\n<p>This method does not execute any service requests.<\/p>\n<p>Entities are created with a Datastore Key, or by specifying a Kind. Kinds\nare only allowed for insert operations. For any other case, you must\nspecify a named key. If a kind is given, an ID will be automatically\nallocated for the entity upon insert. Additionally, if your entity\nrequires a complex key elementPath, you must create the key separately.<\/p>\n<p>In certain cases, you may want to create your own entity types.\nGoogle Cloud PHP supports custom types implementing\n<a data-custom-type=\"datastore\/entityinterface\">Google\\Cloud\\Datastore\\EntityInterface<\/a>. If the name of an\n<code>EntityInterface<\/code> implementation is given in the options array, an\ninstance of that class will be returned instead of\n<a data-custom-type=\"datastore\/entity\">Google\\Cloud\\Datastore\\Entity<\/a>.<\/p>","examples":[],"resources":[{"title":"Entity","link":"https:\/\/cloud.google.com\/datastore\/reference\/rest\/v1\/Entity"}],"params":[{"name":"key","description":"<p>The key used to identify the record, or\na string $kind. The key may be null only if the entity will be\nused as an embedded entity within another entity. Attempting to\nuse keyless entities as root entities will result in error.<\/p>","types":["<a data-custom-type=\"datastore\/key\">Google\\Cloud\\Datastore\\Key<\/a>","<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>","<a href=\"http:\/\/php.net\/manual\/en\/language.types.null.php\" target=\"_blank\">null<\/a>"],"optional":true,"nullable":null},{"name":"entity","description":"<p>The data to fill the entity with.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null},{"name":"options","description":"<p>Configuration Options<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null},{"name":"options.className","description":"<p>If set, the given class will be returned. Value must be the name of a class implementing <a data-custom-type=\"datastore\/entityinterface\">Google\\Cloud\\Datastore\\EntityInterface<\/a>. <strong>Defaults to<\/strong> <a data-custom-type=\"datastore\/entity\">Google\\Cloud\\Datastore\\Entity<\/a>.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":null,"nullable":null},{"name":"options.excludeFromIndexes","description":"<p>A list of entity keys to exclude from datastore indexes.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":null,"nullable":null}],"exceptions":[{"type":"\\Google\\Cloud\\Datastore\\InvalidArgumentException","description":""}],"returns":[{"types":["<a data-custom-type=\"datastore\/entityinterface\">Google\\Cloud\\Datastore\\EntityInterface<\/a>"],"description":""}]},{"id":"beginTransaction","type":"instance","name":"beginTransaction","source":"Datastore\/src\/Operation.php#L254","description":"<p>Begin a Datastore Transaction.<\/p>","examples":[],"resources":[],"params":[{"name":"transactionOptions","description":"<p><a href=\"https:\/\/cloud.google.com\/datastore\/docs\/reference\/data\/rest\/v1\/projects\/beginTransaction#TransactionOptions\">Transaction Options<\/a><\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration options.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":false,"nullable":null}],"exceptions":[],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"description":""}]},{"id":"allocateIds","type":"instance","name":"allocateIds","source":"Datastore\/src\/Operation.php#L279","description":"<p>Allocate available IDs to a set of keys<\/p>\n<p>Keys MUST be in an incomplete state (i.e. including a kind but not an ID\nor name in their final pathElement).<\/p>\n<p>This method will execute a service request.<\/p>","examples":[],"resources":[{"title":"allocateIds","link":"https:\/\/cloud.google.com\/datastore\/reference\/rest\/v1\/projects\/allocateIds"}],"params":[{"name":"keys","description":"<p>The incomplete keys.<\/p>","types":["<a data-custom-type=\"datastore\/key\">Google\\Cloud\\Datastore\\Key[]<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration Options.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null}],"exceptions":[{"type":"\\Google\\Cloud\\Datastore\\InvalidArgumentException","description":""}],"returns":[{"types":["<a data-custom-type=\"datastore\/key\">Google\\Cloud\\Datastore\\Key[]<\/a>"],"description":""}]},{"id":"lookup","type":"instance","name":"lookup","source":"Datastore\/src\/Operation.php#L347","description":"<p>Lookup records by key<\/p>","examples":[],"resources":[],"params":[{"name":"keys","description":"<p>The identifiers to look up.<\/p>","types":["<a data-custom-type=\"datastore\/key\">Google\\Cloud\\Datastore\\Key[]<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration Options<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null},{"name":"options.readConsistency","description":"<p>See <a href=\"https:\/\/cloud.google.com\/datastore\/reference\/rest\/v1\/ReadOptions#ReadConsistency\">ReadConsistency<\/a>.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":null,"nullable":null},{"name":"options.transaction","description":"<p>The transaction ID, if the query should be run in a transaction.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":null,"nullable":null},{"name":"options.className","description":"<p>If a string, the given class will be returned. Value must be the name of a class implementing <a data-custom-type=\"datastore\/entityinterface\">Google\\Cloud\\Datastore\\EntityInterface<\/a>. If an array is given, it must be an associative array, where the key is a Kind and the value must implement <a data-custom-type=\"datastore\/entityinterface\">Google\\Cloud\\Datastore\\EntityInterface<\/a>. <strong>Defaults to<\/strong> <a data-custom-type=\"datastore\/entity\">Google\\Cloud\\Datastore\\Entity<\/a>.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>","<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":null,"nullable":null},{"name":"options.sort","description":"<p>If set to true, results in each set will be sorted to match the order given in $keys. <strong>Defaults to<\/strong> <code>false<\/code>.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.boolean.php\" target=\"_blank\">bool<\/a>"],"optional":null,"nullable":null}],"exceptions":[{"type":"\\Google\\Cloud\\Datastore\\InvalidArgumentException","description":""}],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"description":"<p>Returns an array with keys [<code>found<\/code>, <code>missing<\/code>, and <code>deferred<\/code>].\nMembers of <code>found<\/code> will be instance of\n<a data-custom-type=\"datastore\/entity\">Google\\Cloud\\Datastore\\Entity<\/a>. Members of <code>missing<\/code> and\n<code>deferred<\/code> will be instance of <a data-custom-type=\"datastore\/key\">Google\\Cloud\\Datastore\\Key<\/a>.<\/p>"}]},{"id":"runQuery","type":"instance","name":"runQuery","source":"Datastore\/src\/Operation.php#L428","description":"<p>Run a query and return entities<\/p>","examples":[],"resources":[],"params":[{"name":"query","description":"<p>The query object.<\/p>","types":["<a data-custom-type=\"datastore\/query\/queryinterface\">Google\\Cloud\\Datastore\\Query\\QueryInterface<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration Options<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null},{"name":"options.transaction","description":"<p>The transaction ID, if the query should be run in a transaction.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":null,"nullable":null},{"name":"options.className","description":"<p>If set, the given class will be returned. Value must be the name of a class implementing <a data-custom-type=\"datastore\/entityinterface\">Google\\Cloud\\Datastore\\EntityInterface<\/a>. <strong>Defaults to<\/strong> <a data-custom-type=\"datastore\/entity\">Google\\Cloud\\Datastore\\Entity<\/a>.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":null,"nullable":null},{"name":"options.readConsistency","description":"<p>See <a href=\"https:\/\/cloud.google.com\/datastore\/reference\/rest\/v1\/ReadOptions#ReadConsistency\">ReadConsistency<\/a>.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":null,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"datastore\/entityiterator\">Google\\Cloud\\Datastore\\EntityIterator<\/a>&lt;<a data-custom-type=\"datastore\/entityinterface\">Google\\Cloud\\Datastore\\EntityInterface<\/a>&gt;"],"description":""}]},{"id":"commit","type":"instance","name":"commit","source":"Datastore\/src\/Operation.php#L512","description":"<p>Commit all mutations<\/p>\n<p>Calling this method will end the operation (and close the transaction,\nif one is specified).<\/p>","examples":[],"resources":[],"params":[{"name":"mutations","description":"<p><a href=\"https:\/\/cloud.google.com\/datastore\/docs\/reference\/rest\/v1\/projects\/commit#Mutation\">Mutation[]<\/a>.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration Options<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null},{"name":"options.transaction","description":"<p>The transaction ID, if the query should be run in a transaction.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":null,"nullable":null}],"exceptions":[],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"description":"<p><a href=\"https:\/\/cloud.google.com\/datastore\/reference\/rest\/v1\/projects\/commit#response-body\">Response Body<\/a><\/p>"}]},{"id":"allocateIdsToEntities","type":"instance","name":"allocateIdsToEntities","source":"Datastore\/src\/Operation.php#L536","description":"<p>Patch any incomplete keys in the given array of entities<\/p>\n<p>Any incomplete keys will be allocated an ID. Named keys in the input\nwill remain unchanged.<\/p>","examples":[],"resources":[],"params":[{"name":"entities","description":"<p>A list of entities<\/p>","types":["<a data-custom-type=\"datastore\/entityinterface\">Google\\Cloud\\Datastore\\EntityInterface[]<\/a>"],"optional":false,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"datastore\/entityinterface\">Google\\Cloud\\Datastore\\EntityInterface[]<\/a>"],"description":""}]},{"id":"mutation","type":"instance","name":"mutation","source":"Datastore\/src\/Operation.php#L577","description":"<p>Enqueue a mutation<\/p>\n<p>A mutation is a change to the datastore. Create, Update and Delete are\nexamples of mutations, while Read is not.<\/p>\n<p>Google Cloud Datastore supports multiple mutations in a single API call,\nsubject to the limits of the service. Adding mutations separately from\ncommitting the changes allows you to create complex operations, both\ninside a transaction and not.<\/p>","examples":[],"resources":[{"title":"Limits","link":"https:\/\/cloud.google.com\/datastore\/docs\/concepts\/limits"}],"params":[{"name":"operation","description":"<p>The operation to execute. &quot;Insert&quot;, &quot;Upsert&quot;,\n&quot;Update&quot; or &quot;Delete&quot;.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":false,"nullable":null},{"name":"input","description":"<p>The entity or key to mutate.<\/p>","types":["<a data-custom-type=\"datastore\/entityinterface\">Google\\Cloud\\Datastore\\EntityInterface<\/a>","<a data-custom-type=\"datastore\/key\">Google\\Cloud\\Datastore\\Key<\/a>"],"optional":false,"nullable":null},{"name":"type","description":"<p>The type of the input array.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":false,"nullable":null},{"name":"baseVersion","description":"<p>The version of the entity that this mutation\nis being applied to. If this does not match the current version on\nthe server, the mutation conflicts.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":true,"nullable":null}],"exceptions":[{"type":"\\Google\\Cloud\\Datastore\\InvalidArgumentException","description":""}],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"description":"<p><a href=\"https:\/\/cloud.google.com\/datastore\/docs\/reference\/rest\/v1\/projects\/commit#Mutation\">Mutation<\/a>.<\/p>"}]},{"id":"rollback","type":"instance","name":"rollback","source":"Datastore\/src\/Operation.php#L612","description":"<p>Roll back a transaction<\/p>","examples":[],"resources":[],"params":[{"name":"transactionId","description":"<p>The transaction to roll back<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":false,"nullable":null}],"exceptions":[],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.pseudo-types.php#language.types.void\" target=\"_blank\">void<\/a>"],"description":""}]},{"id":"checkOverwrite","type":"instance","name":"checkOverwrite","source":"Datastore\/src\/Operation.php#L629","description":"<p>Check whether an update or upsert operation may proceed safely<\/p>","examples":[],"resources":[],"params":[{"name":"entities","description":"<p>the entities to be updated or upserted.<\/p>","types":["<a data-custom-type=\"datastore\/entityinterface\">Google\\Cloud\\Datastore\\EntityInterface[]<\/a>"],"optional":false,"nullable":null},{"name":"allowOverwrite","description":"<p>If <code>true<\/code>, entities may be overwritten.\n<strong>Defaults to<\/strong> <code>false<\/code>.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.boolean.php\" target=\"_blank\">bool<\/a>"],"optional":false,"nullable":null}],"exceptions":[{"type":"\\Google\\Cloud\\Datastore\\InvalidArgumentException","description":""}],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.pseudo-types.php#language.types.void\" target=\"_blank\">void<\/a>"],"description":""}]}]}