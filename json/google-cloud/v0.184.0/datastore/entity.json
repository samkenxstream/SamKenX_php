{"id":"datastore\/entity","type":"","title":"Google\\Cloud\\Datastore\\Entity","name":"Entity","description":"<p>A Datastore Entity<\/p>\n<p>Entity implements PHP's <a href=\"http:\/\/php.net\/arrayaccess\">ArrayAccess<\/a>, allowing\naccess via the array syntax (example below).<\/p>\n<p>Properties are mapped automatically to their corresponding Datastore value\ntypes. Refer to the table below for a guide to how types are stored.<\/p>\n<table>\n<thead>\n<tr>\n<th><strong>PHP Type<\/strong><\/th>\n<th><strong>Datastore Value Type<\/strong><\/th>\n<\/tr>\n<\/thead>\n<tbody>\n<tr>\n<td><code>\\DateTimeInterface<\/code><\/td>\n<td><code>timestampValue<\/code><\/td>\n<\/tr>\n<tr>\n<td><a data-custom-type=\"datastore\/key\">Google\\Cloud\\Datastore\\Key<\/a><\/td>\n<td><code>keyValue<\/code><\/td>\n<\/tr>\n<tr>\n<td><a data-custom-type=\"datastore\/geopoint\">Google\\Cloud\\Datastore\\GeoPoint<\/a><\/td>\n<td><code>geoPointValue<\/code><\/td>\n<\/tr>\n<tr>\n<td><a data-custom-type=\"datastore\/entity\">Google\\Cloud\\Datastore\\Entity<\/a><\/td>\n<td><code>entityValue<\/code><\/td>\n<\/tr>\n<tr>\n<td><a data-custom-type=\"datastore\/blob\">Google\\Cloud\\Datastore\\Blob<\/a><\/td>\n<td><code>blobValue<\/code><\/td>\n<\/tr>\n<tr>\n<td><a data-custom-type=\"core\/int64\">Google\\Cloud\\Core\\Int64<\/a><\/td>\n<td><code>integerValue<\/code><\/td>\n<\/tr>\n<tr>\n<td>Associative Array<\/td>\n<td><code>entityValue<\/code> (No Key)<\/td>\n<\/tr>\n<tr>\n<td>Non-Associative Array<\/td>\n<td><code>arrayValue<\/code><\/td>\n<\/tr>\n<tr>\n<td><code>float<\/code><\/td>\n<td><code>doubleValue<\/code><\/td>\n<\/tr>\n<tr>\n<td><code>int<\/code><\/td>\n<td><code>integerValue<\/code><\/td>\n<\/tr>\n<tr>\n<td><code>string<\/code><\/td>\n<td><code>stringValue<\/code><\/td>\n<\/tr>\n<tr>\n<td><code>resource<\/code><\/td>\n<td><code>blobValue<\/code><\/td>\n<\/tr>\n<tr>\n<td><code>NULL<\/code><\/td>\n<td><code>nullValue<\/code><\/td>\n<\/tr>\n<tr>\n<td><code>bool<\/code><\/td>\n<td><code>booleanValue<\/code><\/td>\n<\/tr>\n<tr>\n<td><code>object<\/code> (Outside types specified above)<\/td>\n<td><strong>ERROR<\/strong> <code>InvalidArgumentException<\/code><\/td>\n<\/tr>\n<\/tbody>\n<\/table>","examples":[{"caption":"","code":"use Google\\Cloud\\Datastore\\DatastoreClient;\n\n$datastore = new DatastoreClient();\n\n$key = $datastore->key('Person', 'Bob');\n$entity = $datastore->entity($key, [\n    'firstName' => 'Bob',\n    'lastName' => 'Testguy'\n]);\n\n$firstName = $entity['firstName']; \/\/ 'Bob'\n$entity['location'] = 'Detroit, MI';"},{"caption":"<p>Custom entity types can be created by implementing the datastore entity interface. You can also define mappings to correctly fetch embedded entities.<\/p>","code":"use Google\\Cloud\\Datastore\\EntityTrait;\nuse Google\\Cloud\\Datastore\\EntityInterface;\n\nclass Business implements EntityInterface\n{\n    use EntityTrait;\n\n    public static function mappings()\n    {\n        return [\n            'parent' => Business::class\n        ];\n    }\n}\n\n$alphabet = new Business;\n$alphabet->set([\n    'companyName' => 'Alphabet'\n]);\n\n$key = $datastore->key('Business', 'Google');\n$google = $datastore->entity($key, [\n    'companyName' => 'Google',\n    'parent' => $alphabet\n], [\n    'className' => Business::class\n]);\n\n$datastore->insert($google);\n\n$google = $datastore->lookup($key, ['className' => Business::class]);\necho get_class($google); \/\/ `Business`\necho get_class($google->get()['parent']); \/\/ `Business`"}],"resources":[{"title":"Entity API documentation","link":"https:\/\/cloud.google.com\/datastore\/docs\/reference\/rest\/v1\/Entity"}],"methods":[{"id":"__construct","type":"constructor","name":"__construct","source":"Datastore\/src\/EntityTrait.php#L59","description":"\n\nImplemented in <a data-custom-type=\"datastore\/entitytrait\">Google\\Cloud\\Datastore\\EntityTrait<\/a>","examples":[],"resources":[],"params":[{"name":"key","description":"<p>The Entity's Key, defining its unique\nidentifier. <strong>Defaults to<\/strong> <code>null<\/code>.<\/p>","types":["<a data-custom-type=\"datastore\/key\">Google\\Cloud\\Datastore\\Key<\/a>","<a href=\"http:\/\/php.net\/manual\/en\/language.types.null.php\" target=\"_blank\">null<\/a>"],"optional":true,"nullable":null},{"name":"entity","description":"<p>The entity body. <strong>Defaults to<\/strong> <code>[]<\/code>.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null},{"name":"options","description":"<p>Configuration Options<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null},{"name":"options.cursor","description":"<p>Set only when the entity is obtained by a query result. If set, the entity cursor can be retrieved from <a data-custom-type=\"datastore\/entity\" data-method=\"cursor\">Google\\Cloud\\Datastore\\Entity::cursor()<\/a>.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":null,"nullable":null},{"name":"options.baseVersion","description":"<p>Set only when the entity is obtained by a query result. If set, the entity cursor can be retrieved from <a data-custom-type=\"datastore\/entity\" data-method=\"baseVersion\">Google\\Cloud\\Datastore\\Entity::baseVersion()<\/a>.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":null,"nullable":null},{"name":"options.excludeFromIndexes","description":"<p>A list of entity keys to exclude from datastore indexes.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":null,"nullable":null},{"name":"options.meanings","description":"<p>A list of meaning values for entity properties.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":null,"nullable":null},{"name":"options.populatedByService","description":"<p>Indicates whether the entity was created as the result of a service request.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.boolean.php\" target=\"_blank\">bool<\/a>"],"optional":null,"nullable":null}],"exceptions":[],"returns":[]},{"id":"build","type":"instance","name":"build","source":"Datastore\/src\/EntityTrait.php#L95","description":"<p>A factory method, used by the Datastore client to create entities.<\/p>\n\nImplemented in <a data-custom-type=\"datastore\/entitytrait\">Google\\Cloud\\Datastore\\EntityTrait<\/a>","examples":[],"resources":[],"params":[{"name":"key","description":"<p>The Entity's Key, defining its unique\nidentifier. <strong>Defaults to<\/strong> <code>null<\/code>.<\/p>","types":["<a data-custom-type=\"datastore\/key\">Google\\Cloud\\Datastore\\Key<\/a>","<a href=\"http:\/\/php.net\/manual\/en\/language.types.null.php\" target=\"_blank\">null<\/a>"],"optional":true,"nullable":null},{"name":"entity","description":"<p>The entity body. <strong>Defaults to<\/strong> <code>[]<\/code>.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null},{"name":"options","description":"<p>Configuration Options<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null},{"name":"options.cursor","description":"<p>Set only when the entity is obtained by a query result. If set, the entity cursor can be retrieved from <a data-custom-type=\"datastore\/entity\" data-method=\"cursor\">Google\\Cloud\\Datastore\\Entity::cursor()<\/a>.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":null,"nullable":null},{"name":"options.baseVersion","description":"<p>Set only when the entity is obtained by a query result. If set, the entity cursor can be retrieved from <a data-custom-type=\"datastore\/entity\" data-method=\"baseVersion\">Google\\Cloud\\Datastore\\Entity::baseVersion()<\/a>.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":null,"nullable":null},{"name":"options.excludeFromIndexes","description":"<p>A list of entity keys to exclude from datastore indexes.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":null,"nullable":null},{"name":"options.meanings","description":"<p>A list of meaning values for entity properties.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":null,"nullable":null},{"name":"options.populatedByService","description":"<p>Indicates whether the entity was created as the result of a service request.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.boolean.php\" target=\"_blank\">bool<\/a>"],"optional":null,"nullable":null}],"exceptions":[{"type":"\\Google\\Cloud\\Datastore\\InvalidArgumentException","description":""}],"returns":[]},{"id":"get","type":"instance","name":"get","source":"Datastore\/src\/EntityTrait.php#L110","description":"<p>Get the entity data.<\/p>\n\nImplemented in <a data-custom-type=\"datastore\/entitytrait\">Google\\Cloud\\Datastore\\EntityTrait<\/a>","examples":[{"caption":"","code":"$data = $entity->get();"}],"resources":[],"params":[],"exceptions":[],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"description":""}]},{"id":"getProperty","type":"instance","name":"getProperty","source":"Datastore\/src\/EntityTrait.php#L128","description":"<p>Get a single property from the entity data.<\/p>\n<p>If the property does not exist, this method will return <code>null<\/code>.<\/p>\n\nImplemented in <a data-custom-type=\"datastore\/entitytrait\">Google\\Cloud\\Datastore\\EntityTrait<\/a>","examples":[{"caption":"","code":"$value = $entity->getProperty('firstName');"}],"resources":[],"params":[{"name":"property","description":"<p>The name of an entity property to return.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":false,"nullable":null}],"exceptions":[],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.pseudo-types.php#language.types.mixed\" target=\"_blank\">mixed<\/a>","<a href=\"http:\/\/php.net\/manual\/en\/language.types.null.php\" target=\"_blank\">null<\/a>"],"description":""}]},{"id":"set","type":"instance","name":"set","source":"Datastore\/src\/EntityTrait.php#L151","description":"<p>Set the entity data<\/p>\n<p>Calling this method replaces the entire entity body. To add or modify a\nsingle value on the entity, use the array syntax for assignment.<\/p>\n\nImplemented in <a data-custom-type=\"datastore\/entitytrait\">Google\\Cloud\\Datastore\\EntityTrait<\/a>","examples":[{"caption":"","code":"$entity->set([\n    'firstName' => 'Dave'\n]);"}],"resources":[],"params":[{"name":"entity","description":"<p>The new entity body.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":false,"nullable":null}],"exceptions":[],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.pseudo-types.php#language.types.void\" target=\"_blank\">void<\/a>"],"description":""}]},{"id":"setProperty","type":"instance","name":"setProperty","source":"Datastore\/src\/EntityTrait.php#L171","description":"<p>Set the value of a single entity property.<\/p>\n<p>If the property already exists, the value will be overwritten. If it does\nnot exist, it will be added.<\/p>\n\nImplemented in <a data-custom-type=\"datastore\/entitytrait\">Google\\Cloud\\Datastore\\EntityTrait<\/a>","examples":[{"caption":"","code":"$entity->setProperty('firstName', 'Bob');"}],"resources":[],"params":[{"name":"property","description":"<p>The property name.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":false,"nullable":null},{"name":"value","description":"<p>The property value.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.pseudo-types.php#language.types.mixed\" target=\"_blank\">mixed<\/a>"],"optional":false,"nullable":null}],"exceptions":[],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.pseudo-types.php#language.types.void\" target=\"_blank\">void<\/a>"],"description":""}]},{"id":"key","type":"instance","name":"key","source":"Datastore\/src\/EntityTrait.php#L186","description":"<p>Get the Entity Key<\/p>\n\nImplemented in <a data-custom-type=\"datastore\/entitytrait\">Google\\Cloud\\Datastore\\EntityTrait<\/a>","examples":[{"caption":"","code":"$key = $entity->key();"}],"resources":[],"params":[],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"datastore\/key\">Google\\Cloud\\Datastore\\Key<\/a>","<a href=\"http:\/\/php.net\/manual\/en\/language.types.null.php\" target=\"_blank\">null<\/a>"],"description":""}]},{"id":"cursor","type":"instance","name":"cursor","source":"Datastore\/src\/EntityOptionsTrait.php#L49","description":"<p>Fetch the cursor<\/p>\n<p>This is only set when the entity was obtained from a query result. It\ncan be used to manually paginate results.<\/p>\n\nImplemented in <a data-custom-type=\"datastore\/entityoptionstrait\">Google\\Cloud\\Datastore\\EntityOptionsTrait<\/a>","examples":[{"caption":"","code":"$cursor = $entity->cursor();"}],"resources":[{"title":"EntityResult.cursor","link":"https:\/\/cloud.google.com\/datastore\/docs\/reference\/rest\/v1\/EntityResult"}],"params":[],"exceptions":[],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>","<a href=\"http:\/\/php.net\/manual\/en\/language.types.null.php\" target=\"_blank\">null<\/a>"],"description":""}]},{"id":"baseVersion","type":"instance","name":"baseVersion","source":"Datastore\/src\/EntityOptionsTrait.php#L71","description":"<p>Fetch the baseVersion<\/p>\n<p>This is only set when the entity was obtained from a query result. It\nis used for concurrency control internally.<\/p>\n\nImplemented in <a data-custom-type=\"datastore\/entityoptionstrait\">Google\\Cloud\\Datastore\\EntityOptionsTrait<\/a>","examples":[{"caption":"","code":"$baseVersion = $entity->baseVersion();"}],"resources":[{"title":"EntitResult.version","link":"https:\/\/cloud.google.com\/datastore\/docs\/reference\/rest\/v1\/EntityResult"}],"params":[],"exceptions":[],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>","<a href=\"http:\/\/php.net\/manual\/en\/language.types.null.php\" target=\"_blank\">null<\/a>"],"description":""}]},{"id":"populatedByService","type":"instance","name":"populatedByService","source":"Datastore\/src\/EntityOptionsTrait.php#L88","description":"<p>Indicate whether the entity was created as the result of an API call.<\/p>\n\nImplemented in <a data-custom-type=\"datastore\/entityoptionstrait\">Google\\Cloud\\Datastore\\EntityOptionsTrait<\/a>","examples":[{"caption":"","code":"$populatedByService = $entity->populatedByService();"}],"resources":[],"params":[],"exceptions":[],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.boolean.php\" target=\"_blank\">bool<\/a>"],"description":""}]},{"id":"setExcludeFromIndexes","type":"instance","name":"setExcludeFromIndexes","source":"Datastore\/src\/EntityOptionsTrait.php#L109","description":"<p>A list of entity properties to exclude from datastore indexes.<\/p>\n\nImplemented in <a data-custom-type=\"datastore\/entityoptionstrait\">Google\\Cloud\\Datastore\\EntityOptionsTrait<\/a>","examples":[{"caption":"","code":"$entity['birthDate'] = new DateTime('December 31, 1969');\n$entity->setExcludeFromIndexes([\n    'birthDate'\n]);"}],"resources":[],"params":[{"name":"properties","description":"<p>A list of properties to exclude from indexes.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":false,"nullable":null}],"exceptions":[],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.pseudo-types.php#language.types.void\" target=\"_blank\">void<\/a>"],"description":""}]},{"id":"excludedProperties","type":"instance","name":"excludedProperties","source":"Datastore\/src\/EntityOptionsTrait.php#L124","description":"<p>Return a list of properties excluded from datastore indexes.<\/p>\n\nImplemented in <a data-custom-type=\"datastore\/entityoptionstrait\">Google\\Cloud\\Datastore\\EntityOptionsTrait<\/a>","examples":[{"caption":"","code":"$excludedFromIndexes = $entity->excludedProperties();"}],"resources":[],"params":[],"exceptions":[],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"description":""}]},{"id":"meanings","type":"instance","name":"meanings","source":"Datastore\/src\/EntityOptionsTrait.php#L141","description":"<p>Return a list of meaning values.<\/p>\n\nImplemented in <a data-custom-type=\"datastore\/entityoptionstrait\">Google\\Cloud\\Datastore\\EntityOptionsTrait<\/a>","examples":[{"caption":"","code":"$meanings = $entity->meanings();"}],"resources":[],"params":[],"exceptions":[],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"description":""}]}]}