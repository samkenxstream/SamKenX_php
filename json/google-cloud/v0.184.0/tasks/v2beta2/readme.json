{"id":"tasks\/v2beta2\/readme","type":"guide","title":"Google Cloud Tasks V2Beta2 generated client for PHP","name":"Google Cloud Tasks V2Beta2 generated client for PHP","description":"<body>\n<h3>Sample<\/h3>\n<pre><code class=\"language-php\">require_once __DIR__ . '\/vendor\/autoload.php';\n\nuse Google\\Cloud\\Tasks\\V2beta2\\CloudTasksClient;\nuse Google\\Cloud\\Tasks\\V2beta2\\LeaseDuration;\nuse Google\\Cloud\\Tasks\\V2beta2\\PullMessage;\nuse Google\\Cloud\\Tasks\\V2beta2\\PullTarget;\nuse Google\\Cloud\\Tasks\\V2beta2\\Queue;\nuse Google\\Cloud\\Tasks\\V2beta2\\Task;\nuse Google\\Cloud\\Tasks\\V2beta2\\Task_View;\nuse Google\\Protobuf\\Duration;\n\n$client = new CloudTasksClient();\n\n$project = 'example-project';\n$location = 'us-central1';\n$queue = uniqid('example-queue-');\n$queueName = $client::queueName($project, $location, $queue);\n\n\/\/ Create a pull queue\n$locationName = $client::locationName($project, $location);\n$queue = new Queue();\n$queue-&gt;setName($queueName);\n$queue-&gt;setPullTarget(new PullTarget());\n$client-&gt;createQueue($locationName, $queue);\n\necho \"$queueName created.\" . PHP_EOL;\n\n\/\/ After the creation, wait at least a minute\necho 'Waiting for the queue to settle...' . PHP_EOL;\nsleep(60);\n\n\/\/ Create a task\n$pullMessage = new PullMessage();\n$payload = 'a message for the consumer: ' . uniqid();\n$pullMessage-&gt;setPayload($payload);\n$task = new Task();\n$task-&gt;setPullMessage($pullMessage);\n$client-&gt;createTask($queueName, $task);\n\n\/\/ Lease a task\n$leaseDuration = new Duration();\n$leaseDuration-&gt;setSeconds(600);\n$resp = $client-&gt;leaseTasks(\n    $queueName,\n    $leaseDuration,\n    [\n        'maxTasks' =&gt; 1,\n        'responseView' =&gt; Task_View::FULL\n    ]\n);\n$task = $resp-&gt;getTasks()[0];\nassert($task-&gt;getPullMessage()-&gt;getPayload() === $payload);\n\n\/\/ Acknowledge the task\n$client-&gt;acknowledgeTask($task-&gt;getName(), $task-&gt;getScheduleTime());\n\n\/\/ Delete the queue\n$client-&gt;deleteQueue($queueName);<\/code><\/pre><\/body>","methods":[]}